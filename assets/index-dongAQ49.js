import{y as b,I as j,az as g,aA as x,aB as y,z as T,G as t,aC as k,r as E,j as e}from"./index-jdgWRhPM.js";import{u as S,S as C}from"./index-24R-WUU0.js";import{s as I,u as w,o as F,C as d,L as N,a as v}from"./styles-uBq0XfLz.js";import{G as A,H as B,b as M,w as p}from"./index-7VIJm0Ps.js";import{P as R}from"./createSvgIcon-Rhtpjdhv.js";import{T as f}from"./makeStyles-sHqPI6Gv.js";import{T as P}from"./TextField-WKlPXprm.js";import{P as G}from"./index-h5S2AOes.js";import{A as h}from"./index-sSTL4z3O.js";import"./useTheme-4yoP7FdH.js";import"./InputAdornment-fX_tLDwR.js";function L(){const s=S(),l=b(),{notify:r}=j();return A({mutationFn:B,onSuccess:async(m,{email:i})=>{const a=m.user,u=await a.getIdToken()||"";g.set(x,y(i)),M.set(T,u,{expires:1}),l.toggleAuth({isAuth:!0,me:a})},onError:()=>{r.toggleNotify({open:!0,mode:"error",message:s.formatMessage(t["module.auth.form.status.email.incorrect"])})}})}function Q(){const{formatMessage:s}=S(),l=L(),r=I(),{handleSubmit:m,control:i,formState:{errors:a}}=w({defaultValues:{email:k(g.get(x)),password:""},mode:"onSubmit",resolver:F(v)}),u=E.useCallback(o=>l.mutate(o),[]);return e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"h3",className:r.title,children:s(t["module.auth.form.title.signin"])}),e.jsxs(R,{className:r.form,component:"form",onSubmit:m(u),noValidate:!0,children:[e.jsx(d,{name:"email",control:i,render:({field:o})=>{const c=!!a.email,n=a.email?.message;return e.jsx(P,{...o,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoFocus:!0,error:c,helperText:n&&s(t[n])})}}),e.jsx(d,{name:"password",control:i,render:({field:o})=>{const c=!!a.password,n=a.password?.message;return e.jsx(G,{...o,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,error:c,helperText:n&&s(t[n])})}}),e.jsxs(C,{className:r.link,children:[e.jsx(p,{to:h.REGISTER,replace:!0,children:s(t["module.auth.form.title.register"])}),e.jsx(f,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(p,{to:h.RECOVER,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(N,{type:"submit",loading:l.isPending,size:"large",variant:"contained",fullWidth:!0,className:r.btnSubmit,children:s(t["module.auth.form.button.submit.signin"])})]})]})}export{Q as default};
//# sourceMappingURL=index-dongAQ49.js.map
