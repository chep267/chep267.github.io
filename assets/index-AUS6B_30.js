import{r as c,az as v,j as l,at as K,k as R,L as $}from"./index-7XUSdGMc.js";import{S as d,B as X,u as A}from"./index-5Pha_LLp.js";import{u as H}from"./useCountdown-AyZqbn3x.js";import{b as S,P as V}from"./createSvgIcon-HkhQ5Lvw.js";import{m as _,T as F}from"./makeStyles--5Ime0zL.js";import"./index-ufNFbI83.js";import"./useTheme-mZOOiLHX.js";import"./index-saWHAjDC.js";const Q="/assets/pokemon_1-_rwUpLef.png",q="/assets/pokemon_2-uXJvS91b.png",J="/assets/pokemon_3-mLLpcdTD.png",Z="/assets/pokemon_4-p_ikc5x7.png",U="/assets/pokemon_5-X60QDdXd.png",W="/assets/pokemon_6-aqxAMXVA.png",ee="/assets/pokemon_7-kxyGQ0HX.png",te="/assets/pokemon_8-dgOiZzz8.png",oe="/assets/pokemon_9-qOnlIO1v.png",ne="/assets/pokemon_10-YXaNhRDn.png",se="/assets/pokemon_11-dDshKojj.png",ae="/assets/pokemon_12-eZBPF1Yj.png",re="/assets/pokemon_13-kCHf7t0k.png",me="/assets/pokemon_14-y8nGngTm.png",ce="/assets/pokemon_15-8fL3T8jd.png",ie="/assets/pokemon_16-FeLEj9Vi.png",le="/assets/pokemon_17-4AC_4Kf9.png",ue="/assets/pokemon_18-amt3sHif.png",pe="/assets/pokemon_19-KAg0SO50.png",ge="/assets/pokemon_20-yJYHxrQb.png",ke="/assets/pokemon_21-X25cynzf.png",he="/assets/pokemon_22-pgYGII2W.png",xe="/assets/pokemon_23-r2mGVv-R.png",de="/assets/pokemon_24-ZDgsg9zc.png",ye="/assets/pokemon_25-87joVjIe.png",_e="/assets/pokemon_26-LlDn7Bd3.png",fe="/assets/pokemon_27-Zg4Q78nj.png",ve="/assets/pokemon_28-MC9YpkJ9.png",be="/assets/pokemon_29-EncL34BO.png",Se="/assets/pokemon_30-qpLme0Ks.png",je="/assets/pokemon_31-ctjLe5GQ.png",we="/assets/pokemon_32-lhL1r2sL.png",Me="/assets/pokemon_33-qt732usg.png",Ge="/assets/pokemon_34-1DwBihNu.png",Ie="/assets/pokemon_35-0tVEJMTg.png",Ce="/assets/pokemon_36-pwSrGvGN.png",Ne=Object.freeze({1:Q,2:q,3:J,4:Z,5:U,6:W,7:ee,8:te,9:oe,10:ne,11:se,12:ae,13:re,14:me,15:ce,16:ie,17:le,18:ue,19:pe,20:ge,21:ke,22:he,23:xe,24:de,25:ye,26:_e,27:fe,28:ve,29:be,30:Se,31:je,32:we,33:Me,34:Ge,35:Ie,36:Ce}),b={easy:{row:7,col:14,duration:120},normal:{row:9,col:16,duration:200},hard:{row:11,col:18,duration:300}},$e=36,P=(o,t)=>o.some(e=>e.x===t.x&&e.y===t.y),Pe=o=>{const{row:t,col:e}=b[o],s=Array.from({length:t},()=>[]),a=()=>Math.floor(Math.random()*$e)+1,r=t*e;for(let n=0,i=0;n<t;++n){for(let m=0;m<e;++m){++i;const p=t-1-n,y=e-1-m,f=a();if(s[n][m]={x:n,y:m,value:f},s[p][y]={x:p,y,value:f},i===r/2)break}if(i===r/2)break}for(let n=0;n+1<t;++n)for(let i=0;i+2<e;++i){const m=s[n][i].value;s[n][i].value=s[n+1][i].value,s[n+1][i].value=m}return s},L=(o,t,e)=>!!o?.[t]?.[e]?.value||!1,k=(o,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let n=r;n<=a;++n)if(L(o,t,n))return!1;return!0},h=(o,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let n=r;n<=a;++n)if(L(o,n,t))return!1;return!0},Xe=(o,t,e)=>{const s=Math.max(t.x,e.x),a=Math.min(t.x,e.x),r=Math.max(t.y,e.y),n=Math.min(t.y,e.y);if(t.x===e.x)return n+1===r||k(o,t.x,n+1,r-1);if(t.y===e.y)return a+1===s||h(o,t.y,a+1,s-1)},Le=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);for(let n=s-1;n>=-1;--n)if(h(o,t.y,t.x-1,n)&&h(o,e.y,e.x-1,n)&&k(o,n,r+1,a-1))return!0;return!1},Oe=(o,t,e)=>{const s=Math.max(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);for(let n=s+1;n<=o.length;++n)if(h(o,t.y,t.x+1,n)&&h(o,e.y,e.x+1,n)&&k(o,n,r+1,a-1))return!0;return!1},Ye=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x),r=Math.min(t.y,e.y);for(let n=r-1;n>=-1;--n)if(k(o,t.x,t.y-1,n)&&k(o,e.x,e.y-1,n)&&h(o,n,s+1,a-1))return!0;return!1},De=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x),r=Math.max(t.y,e.y);for(let n=r+1;n<=o[0].length;++n)if(k(o,t.x,t.y+1,n)&&k(o,e.x,e.y+1,n)&&h(o,n,s+1,a-1))return!0;return!1},Te=(o,t)=>{const e=t[0],s=t[1];return t.length<2||!e||!s||e.value!==s.value?!1:Xe(o,e,s)||Le(o,e,s)||Oe(o,e,s)||Ye(o,e,s)||De(o,e,s)},x={boardGame:[],items:[],status:"pending",level:"easy",duration:b.easy.duration,gameKey:1},M=c.createContext({data:x,method:{initGame:v,stopGame:v,restartGame:v,chooseItem:v,getItemStatus:()=>"select"}});M.displayName="PokemonContext";const G=()=>c.useContext(M);function Ee(o){const{children:t}=o,[e,s]=c.useState(x.status),[a,r]=c.useState(x.level),[n,i]=c.useState(x.boardGame),[m,p]=c.useState(x.items),[y,f]=c.useState("select"),[I,O]=c.useState(x.gameKey),j=H({numberCountdown:0});c.useEffect(()=>{C(a)},[I]),c.useEffect(()=>{j.second===0&&e==="start"&&s("stop")},[j.second]),c.useEffect(()=>{const u=m.length>1?Te(n,m)?"success":"error":"select";if(u==="error")setTimeout(()=>{p([])},1e3);else if(u==="success"){const g=m[0],N=m[1];setTimeout(()=>{i(B=>{const w=[...B];return w[g.x][g.y].value=0,w[N.x][N.y].value=0,w}),p([])},1e3)}f(u)},[m]);const C=c.useCallback(u=>{r(u),i(Pe(u)),s("start"),j.onRefresh(b[u].duration)},[]),Y=c.useCallback(()=>{O(u=>(u+1)%7)},[]),D=c.useCallback(()=>{},[]),T=c.useCallback(u=>{p(g=>g.length===2?g:P(g,u)?[]:[...g,u])},[]),E=u=>P(m,u)?y:void 0,z=c.useMemo(()=>({data:{boardGame:n,items:m,status:e,level:a,duration:b[a].duration,gameKey:I},method:{initGame:C,restartGame:Y,stopGame:D,chooseItem:T,getItemStatus:E}}),[e,n,m,a,y]);return l.jsx(M.Provider,{value:z,children:t})}const ze=_({"@keyframes timing":{"0%":{width:"100%"},"100%":{width:"0%"}},line:{position:"relative",width:"100%",height:4,borderRadius:20,backgroundImage:"linear-gradient(to right, red,orange,yellow,green)","&:before":{content:'""',position:"absolute",borderRadius:20,top:0,left:0,bottom:0,animationTimingFunction:"linear"}},lineStart:{backgroundImage:"none","&:before":{backgroundImage:"linear-gradient(to right, red,orange,yellow,green)",animationName:"$timing",animationTimingFunction:"linear"}},lineStop:{opacity:.2}});var Be=ze;function Ke(o){const{className:t}=o,e=Be(),{data:{duration:s,status:a}}=G();return l.jsx(d,{className:S(e.line,t,{[e.lineStart]:a==="start"},{[e.lineStop]:a==="stop"}),sx:{"&:before":{animationDuration:`${s}s`}}})}const Re=_(({palette:o})=>({"@keyframes success":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.9)"},"100%":{transform:"scale(1)"}},"@keyframes error":{"10%, 90%":{transform:"translate3d(-1px, 0, 0)"},"20%, 80%":{transform:"translate3d(2px, 0, 0)"},"30%, 50%, 70%":{transform:"translate3d(-4px, 0, 0)"},"40%, 60%":{transform:"translate3d(4px, 0, 0)"}},item:{width:50,height:70,borderRadius:2,backgroundSize:"cover",backgroundRepeat:"no-repeat","&:hover":{opacity:.8}},itemEmpty:{"&:hover":{background:"unset",cursor:"default"}},itemSelected:{position:"relative",opacity:.6,"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,border:"4px solid",borderColor:o.success.main,opacity:2}},itemError:{animation:"$error 1s linear infinite","&:after":{borderColor:o.error.main}},itemSuccess:{opacity:"1 !important",animation:"$success 1s linear infinite"}}));var Ae=Re;function He(o){const{status:t,item:e,onSelect:s}=o,a=Ae(),r=e.value===0,n=c.useMemo(()=>r?K:{backgroundImage:`url(${Ne[e.value]})`},[r]);return l.jsx(X,{disabled:r,className:S(a.item,{[a.itemEmpty]:r},{[a.itemSelected]:t==="select"||t==="success"||t==="error"},{[a.itemError]:t==="error"},{[a.itemSuccess]:t==="success"}),style:n,onClick:()=>s(e)})}const Ve=_({board:{display:"flex",flexDirection:"column",width:"auto",height:"auto",borderRadius:6,gap:1,padding:10},row:{flexDirection:"row",gap:1}});var Fe=Ve;function Qe(o){const{className:t}=o,e=Fe(),{data:s,method:a}=G();return l.jsx(V,{className:S(e.board,t),children:s.boardGame.map((r,n)=>l.jsx(d,{className:e.row,children:r.map((i,m)=>{const p=a.getItemStatus(i);return l.jsx(He,{status:p,item:i,onSelect:a.chooseItem},`boardGame-${s.gameKey}-row-${n}-col-${m}`)})},`boardGame-${s.gameKey}-row-${n}`))})}const qe=_(({palette:o,zIndex:t})=>({gameOver:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:R(o.background.default,.8),visibility:"hidden"},gameOverShow:{zIndex:t.drawer,visibility:"visible"}}));var Je=qe;function Ze(o){const{className:t}=o,e=Je(),{data:s,method:a}=G(),{formatMessage:r}=A();return l.jsxs(d,{className:S(e.gameOver,{[e.gameOverShow]:s.status==="stop"},t),children:[l.jsx(F,{variant:"h1",color:"warning.main",textAlign:"center",children:r($["module.game.pokemon.text.game.over"])}),l.jsx(X,{variant:"outlined",onClick:a.restartGame,children:r($["module.game.pokemon.button.restart"])})]})}const Ue=_(({spacing:o})=>({screen:{position:"relative",width:"100%",height:"100%",alignItems:"center",overflow:"auto"},header:{width:"100%",alignItems:"center",justifyContent:"center",height:100,minHeight:100},lineDuration:{width:"70%"},body:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",padding:o(1.5)},boardGame:{overflow:"auto",maxWidth:`calc(100% - ${o(3)})`,maxHeight:"100%"}}));var We=Ue;function ct(){const o=We();return l.jsx(Ee,{children:l.jsxs(d,{className:o.screen,children:[l.jsx(d,{className:o.header,children:l.jsx(Ke,{className:o.lineDuration})}),l.jsx(d,{className:o.body,children:l.jsx(Qe,{className:o.boardGame})}),l.jsx(Ze,{})]})})}export{ct as default};
//# sourceMappingURL=index-AUS6B_30.js.map
