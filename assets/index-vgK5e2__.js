import{r as u,az as w,j as i,at as q,k as T,L as _}from"./index-CQb2Mhfu.js";import{S as h,B as M,u as P}from"./index-u6bbolPq.js";import{u as F}from"./useCountdown-vU27c2_U.js";import{b as S,P as J}from"./createSvgIcon-NG5q891N.js";import{m as v,T as X}from"./makeStyles-8laeWSvW.js";import"./index-XHrQNrPa.js";import{w as Z,f as U}from"./index-pp2nuvVE.js";import"./useTheme-RWZuwmiE.js";const W="/assets/pokemon_1-_rwUpLef.png",ee="/assets/pokemon_2-uXJvS91b.png",te="/assets/pokemon_3-mLLpcdTD.png",ne="/assets/pokemon_4-p_ikc5x7.png",oe="/assets/pokemon_5-X60QDdXd.png",se="/assets/pokemon_6-aqxAMXVA.png",ae="/assets/pokemon_7-kxyGQ0HX.png",me="/assets/pokemon_8-dgOiZzz8.png",re="/assets/pokemon_9-qOnlIO1v.png",ie="/assets/pokemon_10-YXaNhRDn.png",le="/assets/pokemon_11-dDshKojj.png",ce="/assets/pokemon_12-eZBPF1Yj.png",ue="/assets/pokemon_13-kCHf7t0k.png",pe="/assets/pokemon_14-y8nGngTm.png",xe="/assets/pokemon_15-8fL3T8jd.png",ye="/assets/pokemon_16-FeLEj9Vi.png",ge="/assets/pokemon_17-4AC_4Kf9.png",ke="/assets/pokemon_18-amt3sHif.png",he="/assets/pokemon_19-KAg0SO50.png",fe="/assets/pokemon_20-yJYHxrQb.png",_e="/assets/pokemon_21-X25cynzf.png",ve="/assets/pokemon_22-pgYGII2W.png",Se="/assets/pokemon_23-r2mGVv-R.png",je="/assets/pokemon_24-ZDgsg9zc.png",we="/assets/pokemon_25-87joVjIe.png",Ge="/assets/pokemon_26-LlDn7Bd3.png",Me="/assets/pokemon_27-Zg4Q78nj.png",de="/assets/pokemon_28-MC9YpkJ9.png",Ie="/assets/pokemon_29-EncL34BO.png",Ce="/assets/pokemon_30-qpLme0Ks.png",Ne="/assets/pokemon_31-ctjLe5GQ.png",$e="/assets/pokemon_32-lhL1r2sL.png",Pe="/assets/pokemon_33-qt732usg.png",Xe="/assets/pokemon_34-1DwBihNu.png",Ee="/assets/pokemon_35-0tVEJMTg.png",Le="/assets/pokemon_36-pwSrGvGN.png",Ye=Object.freeze({1:W,2:ee,3:te,4:ne,5:oe,6:se,7:ae,8:me,9:re,10:ie,11:le,12:ce,13:ue,14:pe,15:xe,16:ye,17:ge,18:ke,19:he,20:fe,21:_e,22:ve,23:Se,24:je,25:we,26:Ge,27:Me,28:de,29:Ie,30:Ce,31:Ne,32:$e,33:Pe,34:Xe,35:Ee,36:Le}),G={easy:{row:7,col:14,duration:180,point:7*14},normal:{row:9,col:16,duration:240,point:9*16},hard:{row:10,col:20,duration:360,point:10*20}},Oe=36,z=(n,t)=>n.some(e=>e.x===t.x&&e.y===t.y),De=n=>{const{row:t,col:e}=G[n],s=Array.from({length:t},(o,m)=>Array.from({length:e},(l,g)=>({x:m,y:g,value:0}))),a=()=>Math.floor(Math.random()*Oe)+1,r=t*e;for(let o=0,m=0;o<t;++o){for(let l=0;l<e;++l){++m;const g=t-1-o,j=e-1-l,I=a();if(s[o][l]={x:o,y:l,value:I},s[g][j]={x:g,y:j,value:I},m>=r/2)break}if(m>=r/2)break}for(let o=0;o+1<t;++o)for(let m=0;m+2<e;++m){const l=s[o][m].value;s[o][m].value=s[o+1][m].value,s[o+1][m].value=l}for(let o=0;o+1<e;++o)for(let m=0;m+2<t;++m){const l=s[m][o].value;s[m][o].value=s[m][o+1].value,s[m][o+1].value=l}return s},c=(n,t,e)=>!!n?.[t]?.[e]?.value||!1,x=(n,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let o=r;o<=a;++o)if(c(n,t,o))return!1;return!0},y=(n,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let o=r;o<=a;++o)if(c(n,o,t))return!1;return!0},be=(n,t,e)=>{const s=Math.max(t.x,e.x),a=Math.min(t.x,e.x),r=Math.max(t.y,e.y),o=Math.min(t.y,e.y);return t.x===e.x?o+1===r||x(n,t.x,o+1,r-1):t.y===e.y?a+1===s||y(n,t.y,a+1,s-1):!1},ze=(n,t,e)=>{if(c(n,t.x-1,t.y))return!1;const s=Math.min(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);if(!c(n,e.x-1,e.y)){for(let o=s-1;o>=-1;--o)if(y(n,t.y,t.x-1,o)&&y(n,e.y,e.x-1,o)&&x(n,o,r+1,a-1))return!0}if(t.x>e.x+1&&!c(n,e.x+1,e.y)){for(let o=t.x-1;o>e.x;--o)if(y(n,t.y,t.x-1,o)&&y(n,e.y,e.x+1,o)&&x(n,o,r+1,a-1))return!0}return!!(t.x>e.x&&(!c(n,e.x,e.y-1)||!c(n,e.x,e.y+1))&&y(n,t.y,t.x-1,e.x)&&(r+1===a||x(n,e.x,r+1,a-1)))},Te=(n,t,e)=>{if(c(n,t.x+1,t.y))return!1;const s=Math.max(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);if(!c(n,e.x+1,e.y)){for(let o=s+1;o<=n.length;++o)if(y(n,t.y,t.x+1,o)&&y(n,e.y,e.x+1,o)&&x(n,o,r+1,a-1))return!0}if(t.x+1<e.x&&!c(n,e.x-1,e.y)){for(let o=t.x+1;o<e.x;++o)if(y(n,t.y,t.x+1,o)&&y(n,e.y,e.x-1,o)&&x(n,o,r+1,a-1))return!0}return!!(t.x<e.x&&!c(n,e.x,e.y-1)&&y(n,t.y,t.x+1,e.x)&&(r+1===a||x(n,e.x,r+1,a-1)))},Ae=(n,t,e)=>{if(c(n,t.x,t.y-1))return!1;const s=Math.max(t.x,e.x),a=Math.min(t.x,e.x),r=Math.max(t.y,e.y),o=Math.min(t.y,e.y);if(!c(n,e.x,e.y-1)){for(let m=o-1;m>=-1;--m)if(y(n,m,a+1,s-1)&&x(n,t.x,t.y-1,m)&&x(n,e.x,e.y-1,m))return!0}if(t.y>e.y+1&&!c(n,e.x,e.y+1)){for(let m=o+1;m<r;++m)if(y(n,m,a+1,s-1)&&x(n,t.x,t.y-1,m)&&x(n,e.x,e.y+1,m))return!0}return!!(t.y>e.y&&(!c(n,e.x-1,e.y)||!c(n,e.x+1,e.y))&&x(n,t.x,t.y-1,e.y)&&(a+1===s||y(n,e.y,a+1,s-1)))},Ve=(n,t,e)=>{if(c(n,t.x,t.y+1))return!1;const s=Math.max(t.x,e.x),a=Math.min(t.x,e.x),r=Math.max(t.y,e.y),o=Math.min(t.y,e.y);if(!c(n,e.x,e.y+1)){for(let m=r+1;m<=n[0].length;++m)if(y(n,m,a+1,s-1)&&x(n,t.x,t.y+1,m)&&x(n,e.x,e.y+1,m))return!0}if(t.y+1<e.y&&!c(n,e.x,e.y-1)){for(let m=o+1;m<r;++m)if(y(n,m,a+1,s-1)&&x(n,t.x,t.y+1,m)&&x(n,e.x,e.y-1,m))return!0}return!!(t.y<e.y&&(!c(n,e.x-1,e.y)||!c(n,e.x+1,e.y))&&x(n,t.x,t.y+1,e.y)&&(a+1===s||y(n,e.y,a+1,s-1)))},Ke=(n,t)=>{const e=t[0],s=t[1];return t.length<2||!e||!s||e.value!==s.value?!1:be(n,e,s)||ze(n,e,s)||Te(n,e,s)||Ae(n,e,s)||Ve(n,e,s)},f={boardGame:[],items:[],status:"pending",level:"easy",duration:G.easy.duration,gameKey:1,point:0},E=u.createContext({data:f,method:{initGame:w,stopGame:w,restartGame:w,nextGame:w,chooseItem:w,getItemStatus:()=>"select"}});E.displayName="PokemonContext";const d=()=>u.useContext(E);function Re(n){const{children:t}=n,[e,s]=u.useState(f.status),[a,r]=u.useState(f.level),[o,m]=u.useState(f.boardGame),[l,g]=u.useState(f.items),[j,I]=u.useState("select"),[C,L]=u.useState(f.point),[Y,O]=u.useState(f.gameKey),N=F({numberCountdown:0});u.useEffect(()=>{D(a),L(0)},[Y]),u.useEffect(()=>{C>=G[a].point&&s("next")},[C]),u.useEffect(()=>{N.second===0&&e==="start"&&s("stop")},[N.second]),u.useEffect(()=>{const p=l.length>1?Ke(o,l)?"success":"error":"select";if(p==="error")setTimeout(()=>{g([])},1e3);else if(p==="success"){const k=l[0],b=l[1];setTimeout(()=>{m(Q=>{const $=[...Q];return $[k.x][k.y].value=0,$[b.x][b.y].value=0,$}),g([])},1e3)}I(p),p==="success"&&setTimeout(()=>L(k=>k+2),1200)},[l]);const D=u.useCallback(p=>{r(p),m(De(p)),s("start"),N.onRefresh(G[p].duration)},[]),A=u.useCallback(()=>{O(p=>(p+1)%7)},[]),V=u.useCallback(()=>{r(p=>p==="easy"?"normal":"hard"),O(p=>(p+1)%7)},[]),K=u.useCallback(()=>{},[]),R=u.useCallback(p=>{g(k=>k.length===2?k:z(k,p)?[]:[...k,p])},[]),B=p=>z(l,p)?j:void 0,H=u.useMemo(()=>({data:{boardGame:o,items:l,status:e,level:a,duration:G[a].duration,gameKey:Y,point:C},method:{initGame:D,restartGame:A,stopGame:K,chooseItem:R,nextGame:V,getItemStatus:B}}),[e,o,l,a,j,C]);return i.jsx(E.Provider,{value:H,children:t})}const Be=v({"@keyframes timing":{"0%":{width:"100%"},"100%":{width:"0%"}},line:{position:"relative",width:"100%",height:4,borderRadius:20,backgroundImage:"linear-gradient(to right, red,orange,yellow,green)","&:before":{content:'""',position:"absolute",borderRadius:20,top:0,left:0,bottom:0,animationTimingFunction:"linear"}},lineStart:{backgroundImage:"none","&:before":{backgroundImage:"linear-gradient(to right, red,orange,yellow,green)",animationName:"$timing"}},lineStop:{opacity:.2}});var He=Be;function Qe(n){const{className:t}=n,e=He(),{data:{duration:s,status:a}}=d();return i.jsx(h,{className:S(e.line,t,{[e.lineStart]:a==="start"},{[e.lineStop]:a==="stop"}),sx:{"&:before":{animationDuration:`${s}s`}}})}const qe=v(({palette:n})=>({"@keyframes success":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.9)"},"100%":{transform:"scale(1)"}},"@keyframes error":{"10%, 90%":{transform:"translate3d(-1px, 0, 0)"},"20%, 80%":{transform:"translate3d(2px, 0, 0)"},"30%, 50%, 70%":{transform:"translate3d(-4px, 0, 0)"},"40%, 60%":{transform:"translate3d(4px, 0, 0)"}},item:{width:50,height:70,borderRadius:2,backgroundSize:"cover",backgroundRepeat:"no-repeat","&:hover":{opacity:.8}},itemEmpty:{"&:hover":{background:"unset",cursor:"default"}},itemSelected:{position:"relative",opacity:.6,"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,border:"4px solid",borderColor:n.success.main,opacity:2}},itemError:{animation:"$error 1s linear infinite","&:after":{borderColor:n.error.main}},itemSuccess:{opacity:"1 !important",animation:"$success 1s linear infinite"}}));var Fe=qe;function Je(n){const{status:t,item:e,onSelect:s}=n,a=Fe(),r=e.value===0,o=u.useMemo(()=>r?q:{backgroundImage:`url(${Ye[e.value]})`},[r]);return i.jsx(M,{disabled:r,className:S(a.item,{[a.itemEmpty]:r},{[a.itemSelected]:t==="select"||t==="success"||t==="error"},{[a.itemError]:t==="error"},{[a.itemSuccess]:t==="success"}),style:o,onClick:()=>s(e)})}const Ze=v({board:{display:"flex",flexDirection:"column",width:"auto",height:"auto",borderRadius:6,gap:1,padding:10},row:{flexDirection:"row",gap:1}});var Ue=Ze;function We(n){const{className:t}=n,e=Ue(),{data:s,method:a}=d();return i.jsx(J,{className:S(e.board,t),children:s.boardGame.map((r,o)=>i.jsx(h,{className:e.row,children:r.map((m,l)=>{const g=a.getItemStatus(m);return i.jsx(Je,{status:g,item:m,onSelect:a.chooseItem},`boardGame-${s.gameKey}-row-${o}-col-${l}`)})},`boardGame-${s.gameKey}-row-${o}`))})}const et=v(({palette:n,zIndex:t,spacing:e})=>({gameOver:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:T(n.background.default,.8),visibility:"hidden",gap:e(2)},gameOverShow:{zIndex:t.drawer,visibility:"visible"}}));var tt=et;function nt(n){const{className:t}=n,e=tt(),{data:s,method:a}=d(),{formatMessage:r}=P();return i.jsxs(h,{className:S(e.gameOver,{[e.gameOverShow]:s.status==="stop"},t),children:[i.jsx(X,{variant:"h1",color:"warning.main",textAlign:"center",children:r(_["module.game.pokemon.text.game.over"])}),i.jsxs(h,{direction:"row",gap:2,children:[i.jsx(M,{variant:"outlined",onClick:a.restartGame,children:r(_["module.game.pokemon.button.restart"])}),i.jsx(Z,{to:U.GAME,children:i.jsx(M,{variant:"outlined",color:"error",children:r(_["module.game.pokemon.button.exit"])})})]})]})}const ot=v(({palette:n,zIndex:t,spacing:e})=>({gameVictory:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:T(n.background.default,.8),visibility:"hidden",gap:e(2)},gameVictoryShow:{zIndex:t.drawer,visibility:"visible"}}));var st=ot;function at(n){const{className:t}=n,e=st(),{data:s,method:a}=d(),{formatMessage:r}=P();return i.jsxs(h,{className:S(e.gameVictory,{[e.gameVictoryShow]:s.status==="next"},t),children:[i.jsx(X,{variant:"h1",color:"warning.main",textAlign:"center",children:r(_["module.game.pokemon.text.game.victory"])}),i.jsxs(h,{direction:"row",gap:2,children:[i.jsx(M,{variant:"outlined",onClick:a.restartGame,children:r(_["module.game.pokemon.button.restart"])}),i.jsx(M,{variant:"outlined",color:"success",onClick:a.nextGame,children:r(_["module.game.pokemon.button.next"])})]})]})}const mt=v(({spacing:n})=>({screen:{position:"relative",width:"100%",height:"100%",alignItems:"center",overflow:"auto"},header:{flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"space-between",height:100,minHeight:100,gap:n(2),padding:`0 ${n(2)}`},lineDuration:{width:"70%"},body:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",padding:n(1.5)},boardGame:{overflow:"auto",maxWidth:`calc(100% - ${n(3)})`,maxHeight:"100%"}}));var rt=mt;const it=v({point:{}});var lt=it;function ct(n){const{className:t}=n,{formatMessage:e}=P(),s=lt(),{data:{point:a}}=d();return i.jsx(X,{className:S(s.point,t),variant:"h4",color:"primary.main",children:e(_["module.game.pokemon.text.game.point"],{point:a})})}function _t(){const n=rt();return i.jsx(Re,{children:i.jsxs(h,{className:n.screen,children:[i.jsxs(h,{className:n.header,children:[i.jsx(Qe,{className:n.lineDuration}),i.jsx(ct,{})]}),i.jsx(h,{className:n.body,children:i.jsx(We,{className:n.boardGame})}),i.jsx(nt,{}),i.jsx(at,{})]})})}export{_t as default};
//# sourceMappingURL=index-vgK5e2__.js.map
