import{b as F,am as k,an as w,ao as N,ap as x,aq as S,c as T,d as v,ar as t,aa as C,r as I,j as e,F as p,P as M,S as A,as as h}from"./index-3bWkHj16.js";import{e as b,s as P,u as B,o as L,C as f,L as E,a as W}from"./styles-Zl5FCsnG.js";import{M as K}from"./TextField-NAqi5oDw.js";import{P as R}from"./index-kLFBwb7_.js";import{A as g}from"./index-84arIswO.js";import"./isMuiElement-GriJZeF9.js";import"./InputAdornment-JzZKtnIJ.js";function V(){const s=F(),i=k();return w({mutationFn:N,onSuccess:async(a,{email:m})=>{const o=a.user,r=await o.getIdToken()||"";x.set(b,S.encrypt(m)),T.set(v,r,{expires:1}),s.method.setAuth({isAuth:!0,me:o})},onError:()=>{i.method.toggleNotify({open:!0,mode:"error",intlMessage:t["module.auth.form.status.email.incorrect"]})}})}function Y(){const{formatMessage:s}=C(),i=V(),a=P(),{handleSubmit:m,control:o,formState:{errors:r},setFocus:j}=B({defaultValues:{email:S.decrypt(x.get(b)),password:""},mode:"onSubmit",resolver:L(W)}),y=I.useCallback(n=>i.mutate(n),[]);return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h3",className:a.title,children:s(t["module.auth.form.title.signin"])}),e.jsxs(M,{className:a.form,component:"form",onSubmit:m(y),noValidate:!0,children:[e.jsx(f,{name:"email",control:o,render:({field:n})=>{var l;const c=!!r.email,u=(l=r.email)==null?void 0:l.message;return e.jsx(K,{...n,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"email",autoFocus:!0,error:c,helperText:u&&s(t[u])})}}),e.jsx(f,{name:"password",control:o,render:({field:{ref:n,...c}})=>{var d;const u=!!r.password,l=(d=r.password)==null?void 0:d.message;return e.jsx(R,{...c,inputRef:n,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"password",error:u,helperText:l&&s(t[l]),setFocus:()=>j("password")})}}),e.jsxs(A,{className:a.link,children:[e.jsx(h,{to:g.register,replace:!0,children:s(t["module.auth.form.title.register"])}),e.jsx(p,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(h,{to:g.recover,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(E,{type:"submit",loading:i.isPending,size:"large",variant:"contained",fullWidth:!0,className:a.btnSubmit,children:s(t["module.auth.form.button.submit.signin"])})]})]})}export{Y as default};
