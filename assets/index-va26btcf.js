import{r as u,aA as w,j as i,ay as Q,o as z,L as _}from"./index-UO0iWmnE.js";import{S as h,B as G}from"./index-0FsL9mRO.js";import{u as q}from"./useCountdown-m7OTR_ea.js";import{b as j,P as J}from"./createSvgIcon-zrs3rjpx.js";import{m as v,j as P,T as E}from"./makeStyles-IPt8QAlK.js";import"./index-_9agm7-a.js";import{F as Z,e as W}from"./index-fZ41sp_K.js";import"./useTheme-9nlXV522.js";const U="/assets/pokemon_1-_rwUpLef.png",ee="/assets/pokemon_2-uXJvS91b.png",te="/assets/pokemon_3-mLLpcdTD.png",ne="/assets/pokemon_4-p_ikc5x7.png",oe="/assets/pokemon_5-X60QDdXd.png",se="/assets/pokemon_6-aqxAMXVA.png",ae="/assets/pokemon_7-kxyGQ0HX.png",me="/assets/pokemon_8-dgOiZzz8.png",re="/assets/pokemon_9-qOnlIO1v.png",ie="/assets/pokemon_10-YXaNhRDn.png",le="/assets/pokemon_11-dDshKojj.png",ce="/assets/pokemon_12-eZBPF1Yj.png",ue="/assets/pokemon_13-kCHf7t0k.png",pe="/assets/pokemon_14-y8nGngTm.png",xe="/assets/pokemon_15-8fL3T8jd.png",ye="/assets/pokemon_16-FeLEj9Vi.png",ge="/assets/pokemon_17-4AC_4Kf9.png",ke="/assets/pokemon_18-amt3sHif.png",he="/assets/pokemon_19-KAg0SO50.png",fe="/assets/pokemon_20-yJYHxrQb.png",_e="/assets/pokemon_21-X25cynzf.png",ve="/assets/pokemon_22-pgYGII2W.png",je="/assets/pokemon_23-r2mGVv-R.png",Se="/assets/pokemon_24-ZDgsg9zc.png",we="/assets/pokemon_25-87joVjIe.png",Me="/assets/pokemon_26-LlDn7Bd3.png",Ge="/assets/pokemon_27-Zg4Q78nj.png",de="/assets/pokemon_28-MC9YpkJ9.png",Ce="/assets/pokemon_29-EncL34BO.png",Ie="/assets/pokemon_30-qpLme0Ks.png",Ne="/assets/pokemon_31-ctjLe5GQ.png",$e="/assets/pokemon_32-lhL1r2sL.png",Pe="/assets/pokemon_33-qt732usg.png",Ee="/assets/pokemon_34-1DwBihNu.png",Oe="/assets/pokemon_35-0tVEJMTg.png",Xe="/assets/pokemon_36-pwSrGvGN.png",Le=Object.freeze({1:U,2:ee,3:te,4:ne,5:oe,6:se,7:ae,8:me,9:re,10:ie,11:le,12:ce,13:ue,14:pe,15:xe,16:ye,17:ge,18:ke,19:he,20:fe,21:_e,22:ve,23:je,24:Se,25:we,26:Me,27:Ge,28:de,29:Ce,30:Ie,31:Ne,32:$e,33:Pe,34:Ee,35:Oe,36:Xe}),M={easy:{row:7,col:14,duration:180,point:7*14},normal:{row:9,col:16,duration:240,point:9*16},hard:{row:10,col:20,duration:360,point:10*20}},Ye=36,T=(t,n)=>t.some(e=>e.x===n.x&&e.y===n.y),De=t=>{const{row:n,col:e}=M[t],s=Array.from({length:n},(o,a)=>Array.from({length:e},(l,g)=>({x:a,y:g,value:0}))),m=()=>Math.floor(Math.random()*Ye)+1,r=n*e;for(let o=0,a=0;o<n;++o){for(let l=0;l<e;++l){++a;const g=n-1-o,S=e-1-l,C=m();if(s[o][l]={x:o,y:l,value:C},s[g][S]={x:g,y:S,value:C},a>=r/2)break}if(a>=r/2)break}for(let o=0;o+1<n;++o)for(let a=0;a+2<e;++a){const l=s[o][a].value;s[o][a].value=s[o+1][a].value,s[o+1][a].value=l}for(let o=0;o+1<e;++o)for(let a=0;a+2<n;++a){const l=s[a][o].value;s[a][o].value=s[a][o+1].value,s[a][o+1].value=l}return s},c=(t,n,e)=>!!t?.[n]?.[e]?.value||!1,x=(t,n,e,s)=>{const m=Math.max(e,s),r=Math.min(e,s);for(let o=r;o<=m;++o)if(c(t,n,o))return!1;return!0},y=(t,n,e,s)=>{const m=Math.max(e,s),r=Math.min(e,s);for(let o=r;o<=m;++o)if(c(t,o,n))return!1;return!0},be=(t,n,e)=>{const s=Math.max(n.x,e.x),m=Math.min(n.x,e.x),r=Math.max(n.y,e.y),o=Math.min(n.y,e.y);return n.x===e.x?o+1===r||x(t,n.x,o+1,r-1):n.y===e.y?m+1===s||y(t,n.y,m+1,s-1):!1},Te=(t,n,e)=>{if(c(t,n.x-1,n.y))return!1;const s=Math.min(n.x,e.x),m=Math.max(n.y,e.y),r=Math.min(n.y,e.y);if(!c(t,e.x-1,e.y)){for(let o=s-1;o>=-1;--o)if(y(t,n.y,n.x-1,o)&&y(t,e.y,e.x-1,o)&&x(t,o,r+1,m-1))return!0}if(n.x>e.x+1&&!c(t,e.x+1,e.y)){for(let o=n.x-1;o>e.x;--o)if(y(t,n.y,n.x-1,o)&&y(t,e.y,e.x+1,o)&&x(t,o,r+1,m-1))return!0}return!!(n.x>e.x&&(!c(t,e.x,e.y-1)||!c(t,e.x,e.y+1))&&y(t,n.y,n.x-1,e.x)&&(r+1===m||x(t,e.x,r+1,m-1)))},ze=(t,n,e)=>{if(c(t,n.x+1,n.y))return!1;const s=Math.max(n.x,e.x),m=Math.max(n.y,e.y),r=Math.min(n.y,e.y);if(!c(t,e.x+1,e.y)){for(let o=s+1;o<=t.length;++o)if(y(t,n.y,n.x+1,o)&&y(t,e.y,e.x+1,o)&&x(t,o,r+1,m-1))return!0}if(n.x+1<e.x&&!c(t,e.x-1,e.y)){for(let o=n.x+1;o<e.x;++o)if(y(t,n.y,n.x+1,o)&&y(t,e.y,e.x-1,o)&&x(t,o,r+1,m-1))return!0}return!!(n.x<e.x&&!c(t,e.x,e.y-1)&&y(t,n.y,n.x+1,e.x)&&(r+1===m||x(t,e.x,r+1,m-1)))},Ae=(t,n,e)=>{if(c(t,n.x,n.y-1))return!1;const s=Math.max(n.x,e.x),m=Math.min(n.x,e.x),r=Math.max(n.y,e.y),o=Math.min(n.y,e.y);if(!c(t,e.x,e.y-1)){for(let a=o-1;a>=-1;--a)if(y(t,a,m+1,s-1)&&x(t,n.x,n.y-1,a)&&x(t,e.x,e.y-1,a))return!0}if(n.y>e.y+1&&!c(t,e.x,e.y+1)){for(let a=o+1;a<r;++a)if(y(t,a,m+1,s-1)&&x(t,n.x,n.y-1,a)&&x(t,e.x,e.y+1,a))return!0}return!!(n.y>e.y&&(!c(t,e.x-1,e.y)||!c(t,e.x+1,e.y))&&x(t,n.x,n.y-1,e.y)&&(m+1===s||y(t,e.y,m+1,s-1)))},Ve=(t,n,e)=>{if(c(t,n.x,n.y+1))return!1;const s=Math.max(n.x,e.x),m=Math.min(n.x,e.x),r=Math.max(n.y,e.y),o=Math.min(n.y,e.y);if(!c(t,e.x,e.y+1)){for(let a=r+1;a<=t[0].length;++a)if(y(t,a,m+1,s-1)&&x(t,n.x,n.y+1,a)&&x(t,e.x,e.y+1,a))return!0}if(n.y+1<e.y&&!c(t,e.x,e.y-1)){for(let a=o+1;a<r;++a)if(y(t,a,m+1,s-1)&&x(t,n.x,n.y+1,a)&&x(t,e.x,e.y-1,a))return!0}return!!(n.y<e.y&&(!c(t,e.x-1,e.y)||!c(t,e.x+1,e.y))&&x(t,n.x,n.y+1,e.y)&&(m+1===s||y(t,e.y,m+1,s-1)))},Ke=(t,n)=>{const e=n[0],s=n[1];return n.length<2||!e||!s||e.value!==s.value?!1:be(t,e,s)||Te(t,e,s)||ze(t,e,s)||Ae(t,e,s)||Ve(t,e,s)},f={boardGame:[],items:[],status:"pending",level:"easy",duration:M.easy.duration,gameKey:1,point:0},O=u.createContext({data:f,method:{initGame:w,stopGame:w,restartGame:w,nextGame:w,chooseItem:w,getItemStatus:()=>"select"}});O.displayName="PokemonContext";const d=()=>u.useContext(O);function Re(t){const{children:n}=t,[e,s]=u.useState(f.status),[m,r]=u.useState(f.level),[o,a]=u.useState(f.boardGame),[l,g]=u.useState(f.items),[S,C]=u.useState("select"),[I,X]=u.useState(f.point),[L,Y]=u.useState(f.gameKey),N=q({numberCountdown:0});u.useEffect(()=>{D(m),X(0)},[L]),u.useEffect(()=>{I>=M[m].point&&s("next")},[I]),u.useEffect(()=>{N.second===0&&e==="start"&&s("stop")},[N.second]),u.useEffect(()=>{const p=l.length>1?Ke(o,l)?"success":"error":"select";if(p==="error")setTimeout(()=>{g([])},1e3);else if(p==="success"){const k=l[0],b=l[1];setTimeout(()=>{a(F=>{const $=[...F];return $[k.x][k.y].value=0,$[b.x][b.y].value=0,$}),g([])},1e3)}C(p),p==="success"&&setTimeout(()=>X(k=>k+2),1200)},[l]);const D=u.useCallback(p=>{r(p),a(De(p)),s("start"),N.onRefresh(M[p].duration)},[]),A=u.useCallback(()=>{Y(p=>(p+1)%7)},[]),V=u.useCallback(()=>{r(p=>p==="easy"?"normal":"hard"),Y(p=>(p+1)%7)},[]),K=u.useCallback(()=>{},[]),R=u.useCallback(p=>{g(k=>k.length===2?k:T(k,p)?[]:[...k,p])},[]),B=p=>T(l,p)?S:void 0,H=u.useMemo(()=>({data:{boardGame:o,items:l,status:e,level:m,duration:M[m].duration,gameKey:L,point:I},method:{initGame:D,restartGame:A,stopGame:K,chooseItem:R,nextGame:V,getItemStatus:B}}),[e,o,l,m,S,I]);return i.jsx(O.Provider,{value:H,children:n})}const Be=v({"@keyframes timing":{"0%":{width:"100%"},"100%":{width:"0%"}},line:{position:"relative",width:"100%",height:4,borderRadius:20,backgroundImage:"linear-gradient(to right, red,orange,yellow,green)","&:before":{content:'""',position:"absolute",borderRadius:20,top:0,left:0,bottom:0,animationTimingFunction:"linear"}},lineStart:{backgroundImage:"none","&:before":{backgroundImage:"linear-gradient(to right, red,orange,yellow,green)",animationName:"$timing"}},lineStop:{opacity:.2}});var He=Be;function Fe(t){const{className:n}=t,e=He(),{data:{duration:s,status:m}}=d();return i.jsx(h,{className:j(e.line,n,{[e.lineStart]:m==="start"},{[e.lineStop]:m==="stop"}),sx:{"&:before":{animationDuration:`${s}s`}}})}const Qe=v(({palette:t})=>({"@keyframes success":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.9)"},"100%":{transform:"scale(1)"}},"@keyframes error":{"10%, 90%":{transform:"translate3d(-1px, 0, 0)"},"20%, 80%":{transform:"translate3d(2px, 0, 0)"},"30%, 50%, 70%":{transform:"translate3d(-4px, 0, 0)"},"40%, 60%":{transform:"translate3d(4px, 0, 0)"}},item:{width:50,height:70,borderRadius:2,backgroundSize:"cover",backgroundRepeat:"no-repeat","&:hover":{opacity:.8}},itemEmpty:{"&:hover":{background:"unset",cursor:"default"}},itemSelected:{position:"relative",opacity:.6,"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,border:"4px solid",borderColor:t.success.main,opacity:2}},itemError:{animation:"$error 1s linear infinite","&:after":{borderColor:t.error.main}},itemSuccess:{opacity:"1 !important",animation:"$success 1s linear infinite"}}));var qe=Qe;function Je(t){const{id:n,status:e,item:s,onSelect:m}=t,r=qe(),o=s.value===0,a=u.useMemo(()=>o?Q:{backgroundImage:`url(${Le[s.value]})`},[o]);return i.jsx(G,{id:n,disabled:o,className:j(r.item,{[r.itemEmpty]:o},{[r.itemSelected]:e==="select"||e==="success"||e==="error"},{[r.itemError]:e==="error"},{[r.itemSuccess]:e==="success"}),style:a,onClick:()=>m(s)})}const Ze=v({board:{display:"flex",flexDirection:"column",width:"auto",height:"auto",borderRadius:6,gap:1,padding:10},row:{flexDirection:"row",gap:1}});var We=Ze;function Ue(t){const{className:n}=t,e=We(),{data:s,method:m}=d();return i.jsx(J,{className:j(e.board,n),children:s.boardGame.map((r,o)=>i.jsx(h,{className:e.row,children:r.map((a,l)=>{const g=m.getItemStatus(a);return i.jsx(Je,{id:`pokemon-item-${o}-${l}`,status:g,item:a,onSelect:m.chooseItem},`boardGame-${s.gameKey}-row-${o}-col-${l}`)})},`boardGame-${s.gameKey}-row-${o}`))})}const et=v(({palette:t,zIndex:n,spacing:e})=>({gameOver:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:z(t.background.default,.8),visibility:"hidden",gap:e(2)},gameOverShow:{zIndex:n.drawer,visibility:"visible"}}));var tt=et;function nt(t){const{className:n}=t,e=tt(),{data:s,method:m}=d(),{formatMessage:r}=P();return i.jsxs(h,{className:j(e.gameOver,{[e.gameOverShow]:s.status==="stop"},n),children:[i.jsx(E,{variant:"h1",color:"warning.main",textAlign:"center",children:r(_["module.game.pokemon.text.game.over"])}),i.jsxs(h,{direction:"row",gap:2,children:[i.jsx(G,{variant:"outlined",onClick:m.restartGame,children:r(_["module.game.pokemon.button.restart"])}),i.jsx(Z,{to:W.GAME,children:i.jsx(G,{variant:"outlined",color:"error",children:r(_["module.game.pokemon.button.exit"])})})]})]})}const ot=v(({palette:t,zIndex:n,spacing:e})=>({gameVictory:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:z(t.background.default,.8),visibility:"hidden",gap:e(2)},gameVictoryShow:{zIndex:n.drawer,visibility:"visible"}}));var st=ot;function at(t){const{className:n}=t,e=st(),{data:s,method:m}=d(),{formatMessage:r}=P();return i.jsxs(h,{className:j(e.gameVictory,{[e.gameVictoryShow]:s.status==="next"},n),children:[i.jsx(E,{variant:"h1",color:"warning.main",textAlign:"center",children:r(_["module.game.pokemon.text.game.victory"])}),i.jsxs(h,{direction:"row",gap:2,children:[i.jsx(G,{variant:"outlined",onClick:m.restartGame,children:r(_["module.game.pokemon.button.restart"])}),i.jsx(G,{variant:"outlined",color:"success",onClick:m.nextGame,children:r(_["module.game.pokemon.button.next"])})]})]})}const mt=v(({spacing:t})=>({screen:{position:"relative",width:"100%",height:"100%",alignItems:"center",overflow:"auto"},header:{flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"space-between",height:100,minHeight:100,gap:t(2),padding:`0 ${t(2)}`},lineDuration:{width:"70%"},body:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",padding:t(1.5)},boardGame:{overflow:"auto",maxWidth:`calc(100% - ${t(3)})`,maxHeight:"100%"}}));var rt=mt;const it=v({point:{}});var lt=it;function ct(t){const{className:n}=t,{formatMessage:e}=P(),s=lt(),{data:{point:m}}=d();return i.jsx(E,{className:j(s.point,n),variant:"h4",color:"primary.main",children:e(_["module.game.pokemon.text.game.point"],{point:m})})}function _t(){const t=rt();return i.jsx(Re,{children:i.jsxs(h,{className:t.screen,children:[i.jsxs(h,{className:t.header,children:[i.jsx(Fe,{className:t.lineDuration}),i.jsx(ct,{})]}),i.jsx(h,{className:t.body,children:i.jsx(Ue,{className:t.boardGame})}),i.jsx(nt,{}),i.jsx(at,{})]})})}export{_t as default};
//# sourceMappingURL=index-va26btcf.js.map
