import{r as i,az as v,j as m,at as B,k as K,L as G}from"./index-kmJqstLT.js";import{S as g,B as M,u as A}from"./index-weSaxHQ5.js";import{u as H}from"./useCountdown-BjqPO6is.js";import{b as S,P as V}from"./createSvgIcon-0IUyJ6ox.js";import{m as _,T as F}from"./makeStyles-BE3EznBh.js";import"./index-mB_sDtRO.js";import{w as Q,f as q}from"./index-mijzJGpj.js";import"./useTheme-kg2nTSMt.js";const J="/assets/pokemon_1-_rwUpLef.png",Z="/assets/pokemon_2-uXJvS91b.png",U="/assets/pokemon_3-mLLpcdTD.png",W="/assets/pokemon_4-p_ikc5x7.png",ee="/assets/pokemon_5-X60QDdXd.png",te="/assets/pokemon_6-aqxAMXVA.png",oe="/assets/pokemon_7-kxyGQ0HX.png",ne="/assets/pokemon_8-dgOiZzz8.png",se="/assets/pokemon_9-qOnlIO1v.png",ae="/assets/pokemon_10-YXaNhRDn.png",re="/assets/pokemon_11-dDshKojj.png",me="/assets/pokemon_12-eZBPF1Yj.png",ce="/assets/pokemon_13-kCHf7t0k.png",ie="/assets/pokemon_14-y8nGngTm.png",le="/assets/pokemon_15-8fL3T8jd.png",ue="/assets/pokemon_16-FeLEj9Vi.png",pe="/assets/pokemon_17-4AC_4Kf9.png",ke="/assets/pokemon_18-amt3sHif.png",ge="/assets/pokemon_19-KAg0SO50.png",he="/assets/pokemon_20-yJYHxrQb.png",xe="/assets/pokemon_21-X25cynzf.png",de="/assets/pokemon_22-pgYGII2W.png",ye="/assets/pokemon_23-r2mGVv-R.png",_e="/assets/pokemon_24-ZDgsg9zc.png",fe="/assets/pokemon_25-87joVjIe.png",ve="/assets/pokemon_26-LlDn7Bd3.png",be="/assets/pokemon_27-Zg4Q78nj.png",Se="/assets/pokemon_28-MC9YpkJ9.png",je="/assets/pokemon_29-EncL34BO.png",we="/assets/pokemon_30-qpLme0Ks.png",Ge="/assets/pokemon_31-ctjLe5GQ.png",Me="/assets/pokemon_32-lhL1r2sL.png",Ie="/assets/pokemon_33-qt732usg.png",Ce="/assets/pokemon_34-1DwBihNu.png",Ne="/assets/pokemon_35-0tVEJMTg.png",$e="/assets/pokemon_36-pwSrGvGN.png",Le=Object.freeze({1:J,2:Z,3:U,4:W,5:ee,6:te,7:oe,8:ne,9:se,10:ae,11:re,12:me,13:ce,14:ie,15:le,16:ue,17:pe,18:ke,19:ge,20:he,21:xe,22:de,23:ye,24:_e,25:fe,26:ve,27:be,28:Se,29:je,30:we,31:Ge,32:Me,33:Ie,34:Ce,35:Ne,36:$e}),b={easy:{row:7,col:14,duration:120},normal:{row:9,col:16,duration:200},hard:{row:11,col:18,duration:300}},Pe=36,P=(o,t)=>o.some(e=>e.x===t.x&&e.y===t.y),Xe=o=>{const{row:t,col:e}=b[o],s=Array.from({length:t},()=>[]),a=()=>Math.floor(Math.random()*Pe)+1,r=t*e;for(let n=0,l=0;n<t;++n){for(let c=0;c<e;++c){++l;const p=t-1-n,y=e-1-c,f=a();if(s[n][c]={x:n,y:c,value:f},s[p][y]={x:p,y,value:f},l===r/2)break}if(l===r/2)break}for(let n=0;n+1<t;++n)for(let l=0;l+2<e;++l){const c=s[n][l].value;s[n][l].value=s[n+1][l].value,s[n+1][l].value=c}return s},X=(o,t,e)=>!!o?.[t]?.[e]?.value||!1,h=(o,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let n=r;n<=a;++n)if(X(o,t,n))return!1;return!0},x=(o,t,e,s)=>{const a=Math.max(e,s),r=Math.min(e,s);for(let n=r;n<=a;++n)if(X(o,n,t))return!1;return!0},Ee=(o,t,e)=>{const s=Math.max(t.x,e.x),a=Math.min(t.x,e.x),r=Math.max(t.y,e.y),n=Math.min(t.y,e.y);if(t.x===e.x)return n+1===r||h(o,t.x,n+1,r-1);if(t.y===e.y)return a+1===s||x(o,t.y,a+1,s-1)},Oe=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);for(let n=s-1;n>=-1;--n)if(x(o,t.y,t.x-1,n)&&x(o,e.y,e.x-1,n)&&h(o,n,r+1,a-1))return!0;return!1},Ye=(o,t,e)=>{const s=Math.max(t.x,e.x),a=Math.max(t.y,e.y),r=Math.min(t.y,e.y);for(let n=s+1;n<=o.length;++n)if(x(o,t.y,t.x+1,n)&&x(o,e.y,e.x+1,n)&&h(o,n,r+1,a-1))return!0;return!1},De=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x),r=Math.min(t.y,e.y);for(let n=r-1;n>=-1;--n)if(h(o,t.x,t.y-1,n)&&h(o,e.x,e.y-1,n)&&x(o,n,s+1,a-1))return!0;return!1},Te=(o,t,e)=>{const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x),r=Math.max(t.y,e.y);for(let n=r+1;n<=o[0].length;++n)if(h(o,t.x,t.y+1,n)&&h(o,e.x,e.y+1,n)&&x(o,n,s+1,a-1))return!0;return!1},Re=(o,t)=>{const e=t[0],s=t[1];return t.length<2||!e||!s||e.value!==s.value?!1:Ee(o,e,s)||Oe(o,e,s)||Ye(o,e,s)||De(o,e,s)||Te(o,e,s)},d={boardGame:[],items:[],status:"pending",level:"easy",duration:b.easy.duration,gameKey:1},I=i.createContext({data:d,method:{initGame:v,stopGame:v,restartGame:v,chooseItem:v,getItemStatus:()=>"select"}});I.displayName="PokemonContext";const C=()=>i.useContext(I);function ze(o){const{children:t}=o,[e,s]=i.useState(d.status),[a,r]=i.useState(d.level),[n,l]=i.useState(d.boardGame),[c,p]=i.useState(d.items),[y,f]=i.useState("select"),[N,E]=i.useState(d.gameKey),j=H({numberCountdown:0});i.useEffect(()=>{$(a)},[N]),i.useEffect(()=>{j.second===0&&e==="start"&&s("stop")},[j.second]),i.useEffect(()=>{const u=c.length>1?Re(n,c)?"success":"error":"select";if(u==="error")setTimeout(()=>{p([])},1e3);else if(u==="success"){const k=c[0],L=c[1];setTimeout(()=>{l(z=>{const w=[...z];return w[k.x][k.y].value=0,w[L.x][L.y].value=0,w}),p([])},1e3)}f(u)},[c]);const $=i.useCallback(u=>{r(u),l(Xe(u)),s("start"),j.onRefresh(b[u].duration)},[]),O=i.useCallback(()=>{E(u=>(u+1)%7)},[]),Y=i.useCallback(()=>{},[]),D=i.useCallback(u=>{p(k=>k.length===2?k:P(k,u)?[]:[...k,u])},[]),T=u=>P(c,u)?y:void 0,R=i.useMemo(()=>({data:{boardGame:n,items:c,status:e,level:a,duration:b[a].duration,gameKey:N},method:{initGame:$,restartGame:O,stopGame:Y,chooseItem:D,getItemStatus:T}}),[e,n,c,a,y]);return m.jsx(I.Provider,{value:R,children:t})}const Be=_({"@keyframes timing":{"0%":{width:"100%"},"100%":{width:"0%"}},line:{position:"relative",width:"100%",height:4,borderRadius:20,backgroundImage:"linear-gradient(to right, red,orange,yellow,green)","&:before":{content:'""',position:"absolute",borderRadius:20,top:0,left:0,bottom:0,animationTimingFunction:"linear"}},lineStart:{backgroundImage:"none","&:before":{backgroundImage:"linear-gradient(to right, red,orange,yellow,green)",animationName:"$timing",animationTimingFunction:"linear"}},lineStop:{opacity:.2}});var Ke=Be;function Ae(o){const{className:t}=o,e=Ke(),{data:{duration:s,status:a}}=C();return m.jsx(g,{className:S(e.line,t,{[e.lineStart]:a==="start"},{[e.lineStop]:a==="stop"}),sx:{"&:before":{animationDuration:`${s}s`}}})}const He=_(({palette:o})=>({"@keyframes success":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.9)"},"100%":{transform:"scale(1)"}},"@keyframes error":{"10%, 90%":{transform:"translate3d(-1px, 0, 0)"},"20%, 80%":{transform:"translate3d(2px, 0, 0)"},"30%, 50%, 70%":{transform:"translate3d(-4px, 0, 0)"},"40%, 60%":{transform:"translate3d(4px, 0, 0)"}},item:{width:50,height:70,borderRadius:2,backgroundSize:"cover",backgroundRepeat:"no-repeat","&:hover":{opacity:.8}},itemEmpty:{"&:hover":{background:"unset",cursor:"default"}},itemSelected:{position:"relative",opacity:.6,"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,border:"4px solid",borderColor:o.success.main,opacity:2}},itemError:{animation:"$error 1s linear infinite","&:after":{borderColor:o.error.main}},itemSuccess:{opacity:"1 !important",animation:"$success 1s linear infinite"}}));var Ve=He;function Fe(o){const{status:t,item:e,onSelect:s}=o,a=Ve(),r=e.value===0,n=i.useMemo(()=>r?B:{backgroundImage:`url(${Le[e.value]})`},[r]);return m.jsx(M,{disabled:r,className:S(a.item,{[a.itemEmpty]:r},{[a.itemSelected]:t==="select"||t==="success"||t==="error"},{[a.itemError]:t==="error"},{[a.itemSuccess]:t==="success"}),style:n,onClick:()=>s(e)})}const Qe=_({board:{display:"flex",flexDirection:"column",width:"auto",height:"auto",borderRadius:6,gap:1,padding:10},row:{flexDirection:"row",gap:1}});var qe=Qe;function Je(o){const{className:t}=o,e=qe(),{data:s,method:a}=C();return m.jsx(V,{className:S(e.board,t),children:s.boardGame.map((r,n)=>m.jsx(g,{className:e.row,children:r.map((l,c)=>{const p=a.getItemStatus(l);return m.jsx(Fe,{status:p,item:l,onSelect:a.chooseItem},`boardGame-${s.gameKey}-row-${n}-col-${c}`)})},`boardGame-${s.gameKey}-row-${n}`))})}const Ze=_(({palette:o,zIndex:t})=>({gameOver:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:K(o.background.default,.8),visibility:"hidden"},gameOverShow:{zIndex:t.drawer,visibility:"visible"}}));var Ue=Ze;function We(o){const{className:t}=o,e=Ue(),{data:s,method:a}=C(),{formatMessage:r}=A();return m.jsxs(g,{className:S(e.gameOver,{[e.gameOverShow]:s.status==="stop"},t),children:[m.jsx(F,{variant:"h1",color:"warning.main",textAlign:"center",children:r(G["module.game.pokemon.text.game.over"])}),m.jsxs(g,{direction:"row",gap:2,children:[m.jsx(M,{variant:"outlined",onClick:a.restartGame,children:r(G["module.game.pokemon.button.restart"])}),m.jsx(Q,{to:q.GAME,children:m.jsx(M,{variant:"outlined",color:"error",onClick:a.restartGame,children:r(G["module.game.pokemon.button.exit"])})})]})]})}const et=_(({spacing:o})=>({screen:{position:"relative",width:"100%",height:"100%",alignItems:"center",overflow:"auto"},header:{width:"100%",alignItems:"center",justifyContent:"center",height:100,minHeight:100},lineDuration:{width:"70%"},body:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",padding:o(1.5)},boardGame:{overflow:"auto",maxWidth:`calc(100% - ${o(3)})`,maxHeight:"100%"}}));var tt=et;function lt(){const o=tt();return m.jsx(ze,{children:m.jsxs(g,{className:o.screen,children:[m.jsx(g,{className:o.header,children:m.jsx(Ae,{className:o.lineDuration})}),m.jsx(g,{className:o.body,children:m.jsx(Je,{className:o.boardGame})}),m.jsx(We,{})]})})}export{lt as default};
//# sourceMappingURL=index-zeAVUIai.js.map
