import{ab as j,al as y,b5 as g,b6 as b,b7 as T,ac as k,aj as t,b8 as w,r as C,j as e}from"./index-zfTJ3vRg.js";import{j as E,T as p}from"./makeStyles-qbQadaYt.js";import{s as F,u as I,o as N,C as d,L as v,a as R}from"./styles-Mtnc6-8R.js";import{m as M,w as A,b as B,n as f}from"./index-ujw96ybd.js";import{P}from"./createSvgIcon-deazEwVy.js";import{S as L}from"./index-W_oXNk-m.js";import{T as V}from"./TextField-fKE7inzO.js";import{P as W}from"./index-fFflhcrq.js";import{A as h}from"./index-8pKAeKEo.js";import"./useTheme-OLk-L8-d.js";import"./InputAdornment-9Hc0JZVy.js";import"./IconButton-PMYTs0X-.js";function _(){const s=j(),{notify:l}=y();return M({mutationFn:A,onSuccess:async(a,{email:m})=>{const r=a.user,o=await r.getIdToken()||"";g.set(b,T(m)),B.set(k,o,{expires:1}),s.toggleAuth({isAuth:!0,me:r})},onError:()=>{l.toggleNotify({open:!0,mode:"error",intlMessage:t["module.auth.form.status.email.incorrect"]})}})}function Z(){const{formatMessage:s}=E(),l=_(),a=F(),{handleSubmit:m,control:r,formState:{errors:o},setFocus:x}=I({defaultValues:{email:w(g.get(b)),password:""},mode:"onSubmit",resolver:N(R)}),S=C.useCallback(n=>l.mutate(n),[]);return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h3",className:a.title,children:s(t["module.auth.form.title.signin"])}),e.jsxs(P,{className:a.form,component:"form",onSubmit:m(S),noValidate:!0,children:[e.jsx(d,{name:"email",control:r,render:({field:n})=>{const u=!!o.email,i=o.email?.message;return e.jsx(V,{...n,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"email",autoFocus:!0,error:u,helperText:i&&s(t[i])})}}),e.jsx(d,{name:"password",control:r,render:({field:{ref:n,...u}})=>{const i=!!o.password,c=o.password?.message;return e.jsx(W,{...u,inputRef:n,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"password",error:i,helperText:c&&s(t[c]),setFocus:()=>x("password")})}}),e.jsxs(L,{className:a.link,children:[e.jsx(f,{to:h.REGISTER,replace:!0,children:s(t["module.auth.form.title.register"])}),e.jsx(p,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(f,{to:h.RECOVER,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(v,{type:"submit",loading:l.isPending,size:"large",variant:"contained",fullWidth:!0,className:a.btnSubmit,children:s(t["module.auth.form.button.submit.signin"])})]})]})}export{Z as default};
//# sourceMappingURL=index-FqiAupyL.js.map
