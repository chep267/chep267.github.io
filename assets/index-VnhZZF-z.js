import{z as j,J as y,aE as g,aF as x,aG as T,A as E,H as t,av as F,r as k,j as e}from"./index-H3DigSoa.js";import{j as C,T as d}from"./makeStyles-zkP1KOBq.js";import{s as w,u as I,o as v,C as p,L as N,a as A}from"./styles-U60fPnG0.js";import{H as R,Z as M,b as B,I as f}from"./index-j99Vo0zm.js";import{P}from"./createSvgIcon-jL38zTJN.js";import{S as H}from"./index-Zpjmgjud.js";import{T as L}from"./TextField-sxuDA1QP.js";import{P as G}from"./index--H1lSSOi.js";import{A as h}from"./index--GCgIrD8.js";import"./useTheme-Hu-GeLnb.js";import"./InputAdornment-skxHxtBy.js";import"./IconButton-HCXq3ISs.js";function V(){const s=j(),{notify:i}=y();return R({mutationFn:M,onSuccess:async(a,{email:m})=>{const r=a.user,o=await r.getIdToken()||"";g.set(x,T(m)),B.set(E,o,{expires:1}),s.method.setAuth({isAuth:!0,me:r})},onError:()=>{i.toggleNotify({open:!0,mode:"error",intlMessage:t["module.auth.form.status.email.incorrect"]})}})}function Y(){const{formatMessage:s}=C(),i=V(),a=w(),{handleSubmit:m,control:r,formState:{errors:o},setFocus:S}=I({defaultValues:{email:F(g.get(x)),password:""},mode:"onSubmit",resolver:v(A)}),b=k.useCallback(n=>i.mutate(n),[]);return e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"h3",className:a.title,children:s(t["module.auth.form.title.signin"])}),e.jsxs(P,{className:a.form,component:"form",onSubmit:m(b),noValidate:!0,children:[e.jsx(p,{name:"email",control:r,render:({field:n})=>{const u=!!o.email,l=o.email?.message;return e.jsx(L,{...n,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"email",autoFocus:!0,error:u,helperText:l&&s(t[l])})}}),e.jsx(p,{name:"password",control:r,render:({field:{ref:n,...u}})=>{const l=!!o.password,c=o.password?.message;return e.jsx(G,{...u,inputRef:n,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"password",error:l,helperText:c&&s(t[c]),setFocus:()=>S("password")})}}),e.jsxs(H,{className:a.link,children:[e.jsx(f,{to:h.REGISTER,replace:!0,children:s(t["module.auth.form.title.register"])}),e.jsx(d,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(f,{to:h.RECOVER,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(N,{type:"submit",loading:i.isPending,size:"large",variant:"contained",fullWidth:!0,className:a.btnSubmit,children:s(t["module.auth.form.button.submit.signin"])})]})]})}export{Y as default};
//# sourceMappingURL=index-VnhZZF-z.js.map
