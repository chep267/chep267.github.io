import{r as m,az as y,j as i,at as z,k as R}from"./index-_y_puk_z.js";import{S as g,B as $}from"./index-h5Ys_4kb.js";import{u as B}from"./useCountdown-0U4oOXBr.js";import{b as x,P as M}from"./createSvgIcon-HkuVRUiB.js";import{m as h,T as A}from"./makeStyles-eBJ9q8K_.js";import"./index-wjeJwtyZ.js";import"./useTheme-SoNor_4q.js";import"./index-JHhSMxmj.js";const X="/assets/pokemon_1-_rwUpLef.png",H="/assets/pokemon_2-uXJvS91b.png",F="/assets/pokemon_3-mLLpcdTD.png",Q="/assets/pokemon_4-p_ikc5x7.png",V="/assets/pokemon_5-X60QDdXd.png",Y="/assets/pokemon_6-aqxAMXVA.png",q="/assets/pokemon_7-kxyGQ0HX.png",J="/assets/pokemon_8-dgOiZzz8.png",Z="/assets/pokemon_9-qOnlIO1v.png",U="/assets/pokemon_10-YXaNhRDn.png",W="/assets/pokemon_11-dDshKojj.png",ee="/assets/pokemon_12-eZBPF1Yj.png",oe="/assets/pokemon_13-kCHf7t0k.png",te="/assets/pokemon_14-y8nGngTm.png",se="/assets/pokemon_15-8fL3T8jd.png",ne="/assets/pokemon_16-FeLEj9Vi.png",ae="/assets/pokemon_17-4AC_4Kf9.png",re="/assets/pokemon_18-amt3sHif.png",me="/assets/pokemon_19-KAg0SO50.png",ce="/assets/pokemon_20-yJYHxrQb.png",ie="/assets/pokemon_21-X25cynzf.png",pe="/assets/pokemon_22-pgYGII2W.png",le="/assets/pokemon_23-r2mGVv-R.png",ue="/assets/pokemon_24-ZDgsg9zc.png",de="/assets/pokemon_25-87joVjIe.png",ke="/assets/pokemon_26-LlDn7Bd3.png",ge="/assets/pokemon_27-Zg4Q78nj.png",_e="/assets/pokemon_28-MC9YpkJ9.png",fe="/assets/pokemon_29-EncL34BO.png",he="/assets/pokemon_30-qpLme0Ks.png",ye="/assets/pokemon_31-ctjLe5GQ.png",be="/assets/pokemon_32-lhL1r2sL.png",xe="/assets/pokemon_33-qt732usg.png",ve="/assets/pokemon_34-1DwBihNu.png",Se="/assets/pokemon_35-0tVEJMTg.png",je="/assets/pokemon_36-pwSrGvGN.png",we=Object.freeze({1:X,2:H,3:F,4:Q,5:V,6:Y,7:q,8:J,9:Z,10:U,11:W,12:ee,13:oe,14:te,15:se,16:ne,17:ae,18:re,19:me,20:ce,21:ie,22:pe,23:le,24:ue,25:de,26:ke,27:ge,28:_e,29:fe,30:he,31:ye,32:be,33:xe,34:ve,35:Se,36:je}),b={easy:{row:7,col:14,duration:120},normal:{row:9,col:16,duration:200},hard:{row:11,col:18,duration:300}},Ge=36,N=(e,t)=>e.some(o=>o.x===t.x&&o.y===t.y),Ie=e=>{const{row:t,col:o}=b[e],s=Array.from({length:t},()=>[]),n=()=>Math.floor(Math.random()*Ge)+1,l=t*o;for(let a=0,c=0;a<t;++a){for(let r=0;r<o;++r){++c;const u=t-1-a,_=o-1-r,f=n();if(s[a][r]={x:a,y:r,value:f},s[u][_]={x:u,y:_,value:f},c===l/2)break}if(c===l/2)break}for(let a=0;a+1<t;++a)for(let c=0;c+2<o;++c){const r=s[a][c].value;s[a][c].value=s[a+1][c].value,s[a+1][c].value=r}return s},k={boardGame:[],items:[],status:"pending",level:"easy",duration:b.easy.duration,gameKey:1},j=m.createContext({data:k,method:{initGame:y,stopGame:y,restartGame:y,chooseItem:y,getItemStatus:()=>"select"}});j.displayName="PokemonContext";const w=()=>m.useContext(j);function Ce(e){const{children:t}=e,[o,s]=m.useState(k.status),[n,l]=m.useState(k.level),[a,c]=m.useState(k.boardGame),[r,u]=m.useState(k.items),[_,f]=m.useState("select"),[G,O]=m.useState(k.gameKey),v=B({numberCountdown:0});m.useEffect(()=>{I(n)},[G]),m.useEffect(()=>{v.second===0&&o==="start"&&s("stop")},[v.second]),m.useEffect(()=>{const p=r.length>1?r[0].value===r[1].value?"success":"error":"select";if(p==="error")setTimeout(()=>{u([]),f("select")},1e3);else if(p==="success"){const d=r[0],C=r[1];setTimeout(()=>{c(K=>{const S=[...K];return S[d.x][d.y].value=0,S[C.x][C.y].value=0,S}),u([])},1e3)}f(p)},[r]);const I=m.useCallback(p=>{l(p),c(Ie(p)),s("start"),v.onRefresh(b[p].duration)},[]),P=m.useCallback(()=>{O(p=>(p+1)%7)},[]),D=m.useCallback(()=>{},[]),L=m.useCallback(p=>{u(d=>d.length===2?d:N(d,p)?[]:[...d,p])},[]),E=p=>N(r,p)?_:void 0,T=m.useMemo(()=>({data:{boardGame:a,items:r,status:o,level:n,duration:b[n].duration,gameKey:G},method:{initGame:I,restartGame:P,stopGame:D,chooseItem:L,getItemStatus:E}}),[o,a,r,n,_]);return i.jsx(j.Provider,{value:T,children:t})}const Ne=h({"@keyframes timing":{"0%":{width:"100%"},"100%":{width:"0%"}},line:{position:"relative",width:"100%",height:4,borderRadius:20,backgroundImage:"linear-gradient(to right, red,orange,yellow,green)","&:before":{content:'""',position:"absolute",borderRadius:20,top:0,left:0,bottom:0,animationTimingFunction:"linear"}},lineStart:{backgroundImage:"none","&:before":{backgroundImage:"linear-gradient(to right, red,orange,yellow,green)",animationName:"$timing",animationTimingFunction:"linear"}},lineStop:{opacity:.2}});var $e=Ne;function Oe(e){const{className:t}=e,o=$e(),{data:{duration:s,status:n}}=w();return i.jsx(g,{className:x(o.line,t,{[o.lineStart]:n==="start"},{[o.lineStop]:n==="stop"}),sx:{"&:before":{animationDuration:`${s}s`}}})}const Pe=h(({palette:e})=>({"@keyframes success":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.9)"},"100%":{transform:"scale(1)"}},"@keyframes error":{"10%, 90%":{transform:"translate3d(-1px, 0, 0)"},"20%, 80%":{transform:"translate3d(2px, 0, 0)"},"30%, 50%, 70%":{transform:"translate3d(-4px, 0, 0)"},"40%, 60%":{transform:"translate3d(4px, 0, 0)"}},item:{width:50,height:70,borderRadius:2,backgroundSize:"cover",backgroundRepeat:"no-repeat","&:hover":{opacity:.8}},itemEmpty:{"&:hover":{background:"unset",cursor:"default"}},itemSelected:{position:"relative",opacity:.6,"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,border:"4px solid",borderColor:e.success.main,opacity:2}},itemError:{animation:"$error 1s linear infinite","&:after":{borderColor:e.error.main}},itemSuccess:{opacity:"1 !important",animation:"$success 1s linear infinite"}}));var De=Pe;function Le(e){const{status:t,item:o,onSelect:s}=e,n=De(),l=o.value===0,a=m.useMemo(()=>l?z:{backgroundImage:`url(${we[o.value]})`},[l]);return i.jsx($,{disabled:l,className:x(n.item,{[n.itemEmpty]:l},{[n.itemSelected]:t==="select"||t==="success"||t==="error"},{[n.itemError]:t==="error"},{[n.itemSuccess]:t==="success"}),style:a,onClick:()=>s(o)})}const Ee=h({board:{display:"flex",flexDirection:"column",width:"auto",height:"auto",borderRadius:0,gap:1},row:{flexDirection:"row",gap:1}});var Te=Ee;function Ke(e){const{className:t}=e,o=Te(),{data:s,method:n}=w();return i.jsx(M,{className:x(o.board,t),children:s.boardGame.map((l,a)=>i.jsx(g,{className:o.row,children:l.map((c,r)=>{const u=n.getItemStatus(c);return i.jsx(Le,{status:u,item:c,onSelect:n.chooseItem},`boardGame-${s.gameKey}-row-${a}-col-${r}`)})},`boardGame-${s.gameKey}-row-${a}`))})}const ze=h(({palette:e,zIndex:t})=>({gameOver:{position:"absolute",alignItems:"center",justifyContent:"center",zIndex:-1,top:0,left:0,right:0,bottom:0,backgroundColor:R(e.background.default,.8),visibility:"hidden"},gameOverShow:{zIndex:t.drawer,visibility:"visible"}}));var Re=ze;function Be(e){const{className:t}=e,o=Re(),{data:s,method:n}=w();return i.jsxs(g,{className:x(o.gameOver,{[o.gameOverShow]:s.status==="stop"},t),children:[i.jsx(A,{variant:"h1",color:"warning.main",children:"Game Over!"}),i.jsx($,{variant:"outlined",onClick:()=>n.restartGame(),children:"Restart"})]})}const Me=h(({spacing:e})=>({screen:{position:"relative",width:"100%",height:"100%",alignItems:"center",overflow:"auto"},header:{width:"100%",alignItems:"center",justifyContent:"center",height:100,minHeight:100},lineDuration:{width:"70%"},body:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",padding:e(1.5)},boardGame:{overflow:"auto",maxWidth:`calc(100% - ${e(3)})`,maxHeight:"100%"}}));var Ae=Me;function Ze(){const e=Ae();return i.jsx(Ce,{children:i.jsxs(g,{className:e.screen,children:[i.jsx(g,{className:e.header,children:i.jsx(Oe,{className:e.lineDuration})}),i.jsx(g,{className:e.body,children:i.jsx(Ke,{className:e.boardGame})}),i.jsx(Be,{})]})})}export{Ze as default};
//# sourceMappingURL=index-imJFsLzX.js.map
