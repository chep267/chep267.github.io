import{y,I as C,aA as x,aB as S,aC as T,z as k,G as t,aD as w,r as E,j as e}from"./index-CQb2Mhfu.js";import{u as b,S as F}from"./index-u6bbolPq.js";import{s as I,u as N,o as v,C as p,L as R,a as A}from"./styles-LFV496cC.js";import{G as B,H as M,b as P,w as f}from"./index-pp2nuvVE.js";import{P as G}from"./createSvgIcon-NG5q891N.js";import{T as h}from"./makeStyles-8laeWSvW.js";import{T as L}from"./TextField-Oumpt-zD.js";import{P as V}from"./index-NfEPL3_3.js";import{A as g}from"./index-G8c4dUtH.js";import"./useTheme-RWZuwmiE.js";import"./InputAdornment-i66M9pZV.js";function W(){const s=b(),n=y(),{notify:o}=C();return B({mutationFn:M,onSuccess:async(m,{email:l})=>{const a=m.user,u=await a.getIdToken()||"";x.set(S,T(l)),P.set(k,u,{expires:1}),n.toggleAuth({isAuth:!0,me:a})},onError:()=>{o.toggleNotify({open:!0,mode:"error",message:s.formatMessage(t["module.auth.form.status.email.incorrect"])})}})}function Y(){const{formatMessage:s}=b(),n=W(),o=I(),{handleSubmit:m,control:l,formState:{errors:a},setFocus:u}=N({defaultValues:{email:w(x.get(S)),password:""},mode:"onSubmit",resolver:v(A)}),j=E.useCallback(r=>n.mutate(r),[]);return e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h3",className:o.title,children:s(t["module.auth.form.title.signin"])}),e.jsxs(G,{className:o.form,component:"form",onSubmit:m(j),noValidate:!0,children:[e.jsx(p,{name:"email",control:l,render:({field:r})=>{const c=!!a.email,i=a.email?.message;return e.jsx(L,{...r,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"email",autoFocus:!0,error:c,helperText:i&&s(t[i])})}}),e.jsx(p,{name:"password",control:l,render:({field:{ref:r,...c}})=>{const i=!!a.password,d=a.password?.message;return e.jsx(V,{...c,inputRef:r,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"password",error:i,helperText:d&&s(t[d]),setFocus:()=>u("password")})}}),e.jsxs(F,{className:o.link,children:[e.jsx(f,{to:g.REGISTER,replace:!0,children:s(t["module.auth.form.title.register"])}),e.jsx(h,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(f,{to:g.RECOVER,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(R,{type:"submit",loading:n.isPending,size:"large",variant:"contained",fullWidth:!0,className:o.btnSubmit,children:s(t["module.auth.form.button.submit.signin"])})]})]})}export{Y as default};
//# sourceMappingURL=index-HT2t6_uv.js.map
