{"version":3,"file":"useCountdown-bU_tMuPU.js","sources":["../../src/modules/module-base/hooks/useCountdown.ts"],"sourcesContent":["/**\n *\n * @author dongntd267@gmail.com on 26/07/2023.\n *\n */\n\nimport * as React from 'react';\n\n/** types */\nimport { TypeUseCountdown } from '@module-base/models';\n\nexport const useCountdown = (props: TypeUseCountdown) => {\n    const { numberCountdown = 10, timer = 1000, callback, isContinue } = props;\n\n    const countdownRef = React.useRef<NodeJS.Timeout>();\n    const [second, setSecond] = React.useState(numberCountdown);\n    const [refresh, setRefresh] = React.useState(0);\n\n    const onStop = React.useCallback(() => clearInterval(countdownRef.current), []);\n\n    const onRefresh = React.useCallback((number = numberCountdown) => {\n        onStop();\n        setSecond(number);\n        setRefresh((prev) => (prev + 1) % 7);\n    }, []);\n\n    const countdownEffect = React.useCallback(() => {\n        setSecond((s) => {\n            if (s <= 1) {\n                callback?.();\n                if (isContinue) {\n                    return numberCountdown;\n                }\n                onStop();\n            }\n            return s - 1;\n        });\n    }, [numberCountdown]);\n\n    React.useEffect(() => {\n        countdownRef.current = setInterval(countdownEffect, timer);\n        return () => {\n            clearInterval(countdownRef.current);\n        };\n    }, [refresh]);\n\n    return {\n        second,\n        onRefresh,\n        onStop,\n    };\n};\n"],"names":["useCountdown","props","numberCountdown","timer","callback","isContinue","countdownRef","React.useRef","second","setSecond","React.useState","refresh","setRefresh","onStop","React.useCallback","onRefresh","number","prev","countdownEffect","s","React.useEffect"],"mappings":"wCAWa,MAAAA,EAAgBC,GAA4B,CACrD,KAAM,CAAE,gBAAAC,EAAkB,GAAI,MAAAC,EAAQ,IAAM,SAAAC,EAAU,WAAAC,CAAe,EAAAJ,EAE/DK,EAAeC,EAAAA,SACf,CAACC,EAAQC,CAAS,EAAIC,WAAeR,CAAe,EACpD,CAACS,EAASC,CAAU,EAAIF,WAAe,CAAC,EAExCG,EAASC,EAAAA,YAAkB,IAAM,cAAcR,EAAa,OAAO,EAAG,CAAA,CAAE,EAExES,EAAYD,EAAAA,YAAkB,CAACE,EAASd,IAAoB,CACvDW,IACPJ,EAAUO,CAAM,EAChBJ,EAAYK,IAAUA,EAAO,GAAK,CAAC,CACvC,EAAG,CAAE,CAAA,EAECC,EAAkBJ,EAAAA,YAAkB,IAAM,CAC5CL,EAAWU,GAAM,CACb,GAAIA,GAAK,EAAG,CAER,GADWf,MACPC,EACO,OAAAH,EAEJW,GACX,CACA,OAAOM,EAAI,CAAA,CACd,CAAA,EACF,CAACjB,CAAe,CAAC,EAEpBkB,OAAAA,EAAAA,UAAgB,KACCd,EAAA,QAAU,YAAYY,EAAiBf,CAAK,EAClD,IAAM,CACT,cAAcG,EAAa,OAAO,CAAA,GAEvC,CAACK,CAAO,CAAC,EAEL,CACH,OAAAH,EACA,UAAAO,EACA,OAAAF,CAAA,CAER"}