import{am as b,an as j,at as y,ap as F,aq as M,ar as t,aa as R,r as C,j as e,F as d,P as E,S as v,as as p}from"./index-3bWkHj16.js";import{e as w,s as N,u as T,C as f,L as k,o as P,a as A}from"./styles-Zl5FCsnG.js";import{M as I}from"./TextField-NAqi5oDw.js";import{P as L}from"./index-kLFBwb7_.js";import{A as h}from"./index-84arIswO.js";import{A as _}from"./AUTH_ERROR_CODES-UL5nlCxe.js";import"./isMuiElement-GriJZeF9.js";import"./InputAdornment-JzZKtnIJ.js";function B(){const s=b();return j({mutationFn:y,onSuccess:(o,{email:a})=>{F.set(w,M.encrypt(a)),s.method.toggleNotify({open:!0,mode:"success",intlMessage:t["module.auth.form.status.register.success"]})},onError:o=>{const a=(o==null?void 0:o.code)===_.EMAIL_EXISTS?"exist":"fail";s.method.toggleNotify({open:!0,mode:"error",intlMessage:t[`module.auth.form.status.register.${a}`]})}})}function K(){const{formatMessage:s}=R(),o=B(),a=N(),{handleSubmit:g,control:m,formState:{errors:i},setFocus:x}=T({defaultValues:{email:"",password:""},mode:"onSubmit",resolver:P(A)}),S=C.useCallback(r=>o.mutate(r),[]);return e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"h3",className:a.title,children:s(t["module.auth.form.title.register"])}),e.jsxs(E,{className:a.form,component:"form",onSubmit:g(S),noValidate:!0,children:[e.jsx(f,{name:"email",control:m,render:({field:r})=>{var l;const u=!!i.email,n=(l=i.email)==null?void 0:l.message;return e.jsx(I,{...r,type:"email",label:s(t["module.auth.form.input.label.email"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"email",autoFocus:!0,error:u,helperText:n&&s(t[n])})}}),e.jsx(f,{name:"password",control:m,render:({field:{ref:r,...u}})=>{var c;const n=!!i.password,l=(c=i.password)==null?void 0:c.message;return e.jsx(L,{...u,inputRef:r,label:s(t["module.auth.form.input.label.password"]),variant:"outlined",spellCheck:!1,fullWidth:!0,autoComplete:"password",error:n,helperText:l&&s(t[l]),setFocus:()=>x("password")})}}),e.jsxs(v,{className:a.link,children:[e.jsx(p,{to:h.signin,replace:!0,children:s(t["module.auth.form.title.signin"])}),e.jsx(d,{variant:"h6",color:"primary.main",children:" / "}),e.jsx(p,{to:h.recover,replace:!0,children:s(t["module.auth.form.title.recover"])})]}),e.jsx(k,{type:"submit",loading:o.isPending,size:"large",variant:"contained",fullWidth:!0,className:a.btnSubmit,children:s(t["module.auth.form.button.submit.register"])})]})]})}export{K as default};
