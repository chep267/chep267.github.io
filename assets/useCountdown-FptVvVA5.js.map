{"version":3,"file":"useCountdown-FptVvVA5.js","sources":["../../src/modules/module-base/hooks/useCountdown.ts"],"sourcesContent":["/**\n *\n * @author dongntd267@gmail.com on 26/07/2023.\n *\n */\n\nimport * as React from 'react';\n\ntype UseCountdownType = {\n    numberCountdown?: number /** thời gian đếm ngược */;\n    timer?: number /**  khoảng đếm ngược */;\n    isContinue?: boolean /** có  tiếp tục đếm ngược khi về 0 */;\n    callback?(): void /** fn callback khi  đếm ngược khi về 0 */;\n};\n\nconst useCountdown = (props: UseCountdownType) => {\n    const { numberCountdown = 10, timer = 1000, callback, isContinue } = props;\n\n    const countdownRef = React.useRef<NodeJS.Timeout>();\n    const [second, setSecond] = React.useState(numberCountdown);\n    const [refresh, setRefresh] = React.useState(0);\n\n    const onStop = React.useCallback(() => clearInterval(countdownRef.current), []);\n\n    const onRefresh = React.useCallback((number = numberCountdown) => {\n        onStop();\n        setSecond(number);\n        setRefresh((prev) => (prev + 1) % 7);\n    }, []);\n\n    const countdownEffect = React.useCallback(() => {\n        setSecond((s) => {\n            if (s <= 1) {\n                callback?.();\n                if (isContinue) {\n                    return numberCountdown;\n                }\n                onStop();\n            }\n            return s - 1;\n        });\n    }, [numberCountdown]);\n\n    React.useEffect(() => {\n        countdownRef.current = setInterval(countdownEffect, timer);\n        return () => {\n            clearInterval(countdownRef.current);\n        };\n    }, [refresh]);\n\n    return {\n        second,\n        onRefresh,\n        onStop,\n    };\n};\n\nexport { useCountdown };\n"],"names":["useCountdown","props","numberCountdown","timer","callback","isContinue","countdownRef","React","second","setSecond","refresh","setRefresh","onStop","clearInterval","current","onRefresh","number","prev","countdownEffect","s","setInterval"],"mappings":"wCAeMA,MAAAA,EAAgBC,GAA4B,CACxC,KAAA,CAAEC,gBAAAA,EAAkB,GAAIC,MAAAA,EAAQ,IAAMC,SAAAA,EAAUC,WAAAA,CAAeJ,EAAAA,EAE/DK,EAAeC,EAAAA,SACf,CAACC,EAAQC,CAAS,EAAIF,WAAeL,CAAe,EACpD,CAACQ,EAASC,CAAU,EAAIJ,WAAe,CAAC,EAExCK,EAASL,EAAAA,YAAkB,IAAMM,cAAcP,EAAaQ,OAAO,EAAG,CAAA,CAAE,EAExEC,EAAYR,EAAAA,YAAkB,CAACS,EAASd,IAAoB,CACvDU,IACPH,EAAUO,CAAM,EACJC,EAAAA,IAAUA,EAAO,GAAK,CAAC,CACvC,EAAG,CAAE,CAAA,EAECC,EAAkBX,EAAAA,YAAkB,IAAM,CAC5CE,EAAiBU,GAAA,CACb,GAAIA,GAAK,EAAG,CAER,GADWf,MACPC,EACOH,OAAAA,EAEJU,GACX,CACA,OAAOO,EAAI,CAAA,CACd,CAAA,EACF,CAACjB,CAAe,CAAC,EAEpBK,OAAAA,EAAAA,UAAgB,KACCO,EAAAA,QAAUM,YAAYF,EAAiBf,CAAK,EAClD,IAAM,CACTU,cAAcP,EAAaQ,OAAO,CAAA,GAEvC,CAACJ,CAAO,CAAC,EAEL,CACHF,OAAAA,EACAO,UAAAA,EACAH,OAAAA,CAAAA,CAER"}